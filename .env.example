# =============================================================================
# NAAP Platform - Environment Configuration
# =============================================================================
#
# Copy this file to the appropriate location and customize:
#   - Vercel: Set these in Project Settings > Environment Variables
#   - Local:  Copy to apps/web-next/.env.local
#   - Docker: Use docker-compose.production.yml env_file or environment
#
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults
# =============================================================================

# ═══════════════════════════════════════════════════════════════════════════════
# CORE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# [REQUIRED] Application URL (your production domain)
NEXT_PUBLIC_APP_URL=https://your-domain.com

# [REQUIRED] NextAuth secret for session encryption (min 32 chars)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=

# Deployment stage: development | staging | production
# Auto-detected from VERCEL_ENV if not set
# DEPLOY_ENV=production

# ═══════════════════════════════════════════════════════════════════════════════
# DATABASE
# ═══════════════════════════════════════════════════════════════════════════════

# [REQUIRED] PostgreSQL connection URL
# For Neon (recommended for Vercel):
#   postgres://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
# With connection pooling (recommended):
#   postgres://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require&pgbouncer=true&connection_limit=10
DATABASE_URL=

# Unpooled connection for migrations (Neon requires this for schema changes)
# Same as DATABASE_URL but without pooling parameters
DATABASE_URL_UNPOOLED=

# ═══════════════════════════════════════════════════════════════════════════════
# AUTHENTICATION - OAuth Providers
# ═══════════════════════════════════════════════════════════════════════════════

# Google OAuth 2.0
# Setup: https://console.cloud.google.com/apis/credentials
# Redirect URI: ${NEXT_PUBLIC_APP_URL}/api/v1/auth/callback/google
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# GitHub OAuth
# Setup: https://github.com/settings/developers → OAuth Apps → New
# Redirect URI: ${NEXT_PUBLIC_APP_URL}/api/v1/auth/callback/github
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# SIWE (Sign-In With Ethereum) + jwt-issuer
# Server-side jwt-issuer URL for SIWE login and JWT issuance (e.g. http://localhost:8082)
JWT_ISSUER_URL=http://jwks-issuer.your-domain.com:8082
# WalletConnect project ID: https://cloud.walletconnect.com
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=

# Optional: Override auto-derived redirect URIs
# GOOGLE_REDIRECT_URI=https://your-domain.com/api/v1/auth/callback/google
# GITHUB_REDIRECT_URI=https://your-domain.com/api/v1/auth/callback/github

# ═══════════════════════════════════════════════════════════════════════════════
# STORAGE
# ═══════════════════════════════════════════════════════════════════════════════

# Vercel Blob Storage token
# Get from: Vercel Dashboard → Project → Storage → Blob
# Without this, storage falls back to local filesystem (not for production)
BLOB_READ_WRITE_TOKEN=

# ═══════════════════════════════════════════════════════════════════════════════
# REALTIME MESSAGING
# ═══════════════════════════════════════════════════════════════════════════════

# Ably API key for realtime features
# Get from: https://ably.com/dashboard
# Without this, SSE (Server-Sent Events) is used as fallback
ABLY_API_KEY=

# ═══════════════════════════════════════════════════════════════════════════════
# OFF-VERCEL BACKEND SERVICES (Hybrid Deployment)
# ═══════════════════════════════════════════════════════════════════════════════
#
# These services run outside Vercel (on your own infrastructure).
# The Next.js API routes proxy requests to these services.
# In production, set to your backend host URLs (e.g., https://api.your-domain.com)
# ═══════════════════════════════════════════════════════════════════════════════

# [REQUIRED for production] Core platform service
# Handles: auth, plugin registry, lifecycle, teams, tenants, RBAC, secrets
BASE_SVC_URL=https://api.your-domain.com

# Plugin frontend asset server
PLUGIN_SERVER_URL=https://plugins.your-domain.com

# Livepeer integration service (staking, orchestrators, protocol)
LIVEPEER_SVC_URL=https://livepeer.your-domain.com

# AI/Video pipeline gateway
PIPELINE_GATEWAY_URL=https://pipelines.your-domain.com

# Artifact storage service
STORAGE_SVC_URL=https://storage.your-domain.com

# Infrastructure provisioning service
INFRASTRUCTURE_SVC_URL=https://infra.your-domain.com

# ═══════════════════════════════════════════════════════════════════════════════
# PLUGIN BACKEND SERVICES
# ═══════════════════════════════════════════════════════════════════════════════
#
# These are proxied via /api/v1/[plugin]/* catch-all route
# Set to the URLs where each plugin backend is hosted
# ═══════════════════════════════════════════════════════════════════════════════

GATEWAY_MANAGER_URL=https://api.your-domain.com:4001
ORCHESTRATOR_MANAGER_URL=https://api.your-domain.com:4002
CAPACITY_PLANNER_URL=https://api.your-domain.com:4003
NETWORK_ANALYTICS_URL=https://api.your-domain.com:4004
MARKETPLACE_URL=https://api.your-domain.com:4005
COMMUNITY_URL=https://api.your-domain.com:4006
WALLET_URL=https://api.your-domain.com:4007
DASHBOARD_URL=https://api.your-domain.com:4008
DAYDREAM_VIDEO_URL=https://api.your-domain.com:4010
DEVELOPER_API_URL=https://api.your-domain.com:4011
PLUGIN_PUBLISHER_URL=https://api.your-domain.com:4012

# ═══════════════════════════════════════════════════════════════════════════════
# CACHING
# ═══════════════════════════════════════════════════════════════════════════════

# Redis URL for caching and rate limiting
# Format: redis://[[username:]password@]host[:port][/database]
# Without this, in-memory caching is used (not recommended for production)
REDIS_URL=redis://localhost:6379

# ═══════════════════════════════════════════════════════════════════════════════
# MONITORING & OBSERVABILITY
# ═══════════════════════════════════════════════════════════════════════════════

# Sentry DSN for error tracking
# Get from: https://sentry.io/settings/projects/{project}/keys/
SENTRY_DSN=

# Log level: debug | info | warn | error
LOG_LEVEL=info

# ═══════════════════════════════════════════════════════════════════════════════
# FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════════════════

# Enable debug mode (adds extra logging, debug endpoints)
DEBUG=false

# Enable maintenance mode (returns 503 for all requests)
MAINTENANCE_MODE=false

# ═══════════════════════════════════════════════════════════════════════════════
# SECURITY
# ═══════════════════════════════════════════════════════════════════════════════

# Encryption key for secrets at rest (32 bytes, base64 encoded)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=

# Rate limiting (requests per minute)
RATE_LIMIT_AUTH=10
RATE_LIMIT_API=100

# Allowed origins for CORS (comma-separated)
# ALLOWED_ORIGINS=https://your-domain.com,https://app.your-domain.com

# ═══════════════════════════════════════════════════════════════════════════════
# PLUGIN DEVELOPMENT (only for local development)
# ═══════════════════════════════════════════════════════════════════════════════

# Skip SSL verification for local plugin backends
# NODE_TLS_REJECT_UNAUTHORIZED=0

# Enable hot reload for plugins
# PLUGIN_HOT_RELOAD=true
