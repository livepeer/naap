/* Fonts are loaded via next/font/google in layout.tsx (Inter Variable + JetBrains Mono) */

@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * NAAP Brand Theme — Aligned with Livepeer Brand System
 * Light mode (default) with .dark class for dark mode
 * Surface hierarchy: 4 levels (base / elevated / card / border)
 * Text hierarchy: 6 opacity levels
 */

/* ============================================
   Light Mode (Default)
   ============================================ */
:root {
  /* Surfaces */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #f1f5f9;
  --border-color: #e2e8f0;

  /* Text — 6-level hierarchy */
  --text-primary: #0f172a;
  --text-secondary: #334155;
  --text-body: #475569;
  --text-supporting: #64748b;
  --text-muted: #94a3b8;
  --text-disabled: #cbd5e1;

  /* Brand accent — Livepeer green */
  --accent-green: #18794E;
  --accent-green-light: #1E9960;
  --accent-green-bright: #40BF86;

  /* Secondary accents */
  --accent-blue: #2563eb;
  --accent-amber: #d97706;
  --accent-rose: #dc2626;
  --accent-purple: #7c3aed;

  /* Legacy accent aliases (for existing component compat) */
  --accent-emerald: #18794E;

  /* Semantic mappings for UI components (HSL for Tailwind) */
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 210 40% 98%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --primary: 153 66% 28%;             /* Livepeer green #18794E */
  --primary-foreground: 0 0% 100%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222 47% 11%;
  --muted: 210 40% 96%;
  --muted-foreground: 215 16% 47%;
  --accent: 217 91% 60%;
  --accent-foreground: 0 0% 100%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 98%;
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 153 66% 28%;                /* Livepeer green ring */
  --radius: 0.5rem;

  /* Status Colors */
  --success: 153 66% 28%;
  --warning: 38 92% 50%;
  --error: 350 89% 60%;
  --info: 217 91% 60%;
}

/* ============================================
   Dark Mode — Livepeer Brand
   ============================================ */
.dark {
  /* Surfaces — Livepeer neutral dark scale
     Frame (#121212) → Surface (#1F1F1F) → Elevated (#242424)
     Sidebar + topbar + content share the surface level, creating
     a cohesive panel that "floats" on the darker frame. */
  --bg-primary: #121212;
  --bg-secondary: #1A1A1A;
  --bg-tertiary: #222222;
  --border-color: #2A2A2A;

  /* Text — 6-level opacity hierarchy */
  --text-primary: rgba(255, 255, 255, 1);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-body: rgba(255, 255, 255, 0.6);
  --text-supporting: rgba(255, 255, 255, 0.5);
  --text-muted: rgba(255, 255, 255, 0.4);
  --text-disabled: rgba(255, 255, 255, 0.25);

  /* Brand accent — Livepeer green (brighter on dark) */
  --accent-green: #1E9960;
  --accent-green-light: #40BF86;
  --accent-green-bright: #6DB09C;

  /* Secondary accents */
  --accent-blue: #3b82f6;
  --accent-amber: #f59e0b;
  --accent-rose: #f43f5e;
  --accent-purple: #8b5cf6;

  /* Legacy accent alias */
  --accent-emerald: #1E9960;

  /* Semantic mappings (HSL)
     --background = dark frame (body, loading states)
     --card = app surface (sidebar, topbar, content area, cards)
     Cards within the surface use borders for structure, not bg differences. */
  --background: 0 0% 7%;              /* #121212 — dark frame + sidebar */
  --foreground: 0 0% 100%;
  --card: 0 0% 10%;                   /* #1A1A1A — elevated content surface (subtle lift) */
  --card-foreground: 0 0% 100%;
  --popover: 0 0% 14%;                /* #242424 */
  --popover-foreground: 0 0% 100%;
  --primary: 153 66% 35%;             /* #1E9960 */
  --primary-foreground: 0 0% 100%;
  --secondary: 0 0% 14%;              /* #242424 */
  --secondary-foreground: 0 0% 100%;
  --muted: 0 0% 15%;
  --muted-foreground: 0 0% 64%;
  --accent: 217 91% 60%;
  --accent-foreground: 0 0% 100%;
  --destructive: 350 89% 60%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 17%;                 /* slightly lighter for contrast against darker surface */
  --input: 0 0% 15%;
  --ring: 153 66% 35%;

  /* Status Colors */
  --success: 153 66% 35%;
  --warning: 43 96% 56%;
  --error: 350 89% 60%;
  --info: 217 91% 60%;
}

/* ============================================
   Base Layer
   ============================================ */
@layer base {
  * {
    @apply border-border;
  }

  html {
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  html.dark {
    color-scheme: dark;
  }

  html:not(.dark) {
    color-scheme: light;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  code, pre, .font-mono {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
  }
}

/* ============================================
   Typography Utilities
   ============================================ */
@layer utilities {
  .text-display {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  .text-heading {
    font-size: 1.25rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    line-height: 1.4;
  }

  .text-subhead {
    font-size: 0.875rem;
    font-weight: 600;
    letter-spacing: 0;
    line-height: 1.5;
  }

  .text-body {
    font-size: 0.875rem;
    font-weight: 400;
    letter-spacing: 0;
    line-height: 1.5;
  }

  .text-caption {
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0;
    line-height: 1.5;
  }

  .text-label {
    font-size: 0.6875rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    line-height: 1.4;
    text-transform: uppercase;
  }

  .text-mono {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0;
    line-height: 1.5;
  }
}

/* ============================================
   Glass Card Effect — Theme Aware
   ============================================ */
.glass-card {
  @apply backdrop-blur-md rounded-2xl;
  background-color: hsl(var(--card));
  border: 1px solid var(--border-color);
}

.dark .glass-card {
  background-color: #1A1A1A;
  border-color: #2A2A2A;
}

/* ============================================
   Custom Scrollbar — Theme Aware
   ============================================ */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.2);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.4);
  }

  /* Custom scrollbar - dark mode */
  .dark .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Custom scrollbar - light mode */
  html:not(.dark) .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  html:not(.dark) .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  html:not(.dark) .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 3px;
  }

  html:not(.dark) .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.25);
  }
}

/* ============================================
   Animation Utilities
   ============================================ */
@layer utilities {
  .animate-in {
    animation: animateIn 0.2s ease-out;
  }

  .animate-out {
    animation: animateOut 0.2s ease-in;
  }

  @keyframes animateIn {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes animateOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(4px);
    }
  }

  /* VHS / analog glitch — logo entrance (3-color: green + magenta + cyan) */
  .animate-vhs {
    animation: vhs-glitch 2.8s ease-out forwards;
  }

  @keyframes vhs-glitch {
    /* fade in with heavy chromatic split */
    0% {
      opacity: 0;
      filter:
        drop-shadow(-5px 0 rgba(0, 235, 136, 0.9))
        drop-shadow(5px 0 rgba(255, 0, 80, 0.8))
        drop-shadow(0 3px rgba(0, 200, 255, 0.7));
      transform: translateX(-4px) scaleY(1.04);
    }
    5% {
      opacity: 1;
      filter:
        drop-shadow(6px 0 rgba(0, 235, 136, 0.8))
        drop-shadow(-5px 0 rgba(255, 0, 80, 0.7))
        drop-shadow(0 -3px rgba(0, 200, 255, 0.6));
      transform: translateX(5px) scaleY(0.96);
    }
    /* hold the split visible — jitter between offsets */
    10% {
      filter:
        drop-shadow(-4px 0 rgba(0, 235, 136, 0.7))
        drop-shadow(4px 0 rgba(255, 0, 80, 0.6))
        drop-shadow(0 2px rgba(0, 200, 255, 0.5));
      transform: translateX(-3px) scaleY(1.02);
    }
    16% {
      filter:
        drop-shadow(3px 0 rgba(0, 235, 136, 0.65))
        drop-shadow(-3px 0 rgba(255, 0, 80, 0.55))
        drop-shadow(0 -2px rgba(0, 200, 255, 0.45));
      transform: translateX(2px) scaleY(0.99);
    }
    22% {
      filter:
        drop-shadow(-3px 0 rgba(0, 235, 136, 0.55))
        drop-shadow(3px 0 rgba(255, 0, 80, 0.45))
        drop-shadow(0 1px rgba(0, 200, 255, 0.35));
      transform: translateX(-2px) scaleY(1.01);
    }
    /* begin resolving */
    32% {
      filter:
        drop-shadow(2px 0 rgba(0, 235, 136, 0.35))
        drop-shadow(-2px 0 rgba(255, 0, 80, 0.3))
        drop-shadow(0 -1px rgba(0, 200, 255, 0.2));
      transform: translateX(1px) scaleY(1);
    }
    45% {
      filter:
        drop-shadow(1px 0 rgba(0, 235, 136, 0.15))
        drop-shadow(-1px 0 rgba(255, 0, 80, 0.1));
      transform: none;
    }
    60% {
      filter: none;
      transform: none;
    }
    100% {
      filter: none;
      transform: none;
      opacity: 1;
    }
  }

  /* Hover re-trigger — replays the same entrance glitch, only after entrance finishes */
  .vhs-scanlines:hover > svg:not(.animate-vhs) {
    animation: vhs-glitch 2.8s ease-out forwards;
  }

  /* Scanline overlay for VHS logo container */
  .vhs-scanlines {
    position: relative;
  }

  .vhs-scanlines::after {
    content: '';
    position: absolute;
    inset: -4px -8px;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(255, 255, 255, 0.03) 2px,
      rgba(255, 255, 255, 0.03) 4px
    );
    pointer-events: none;
    opacity: 0;
    animation: scanline-entrance 2.8s ease-out forwards;
  }

  /* Scanline re-trigger on hover — separate name guarantees restart */
  .vhs-scanlines:hover::after {
    animation: scanline-hover 2.8s ease-out forwards;
  }

  @keyframes scanline-entrance {
    0% { opacity: 1; }
    25% { opacity: 0.6; }
    50% { opacity: 0.2; }
    100% { opacity: 0; }
  }

  @keyframes scanline-hover {
    0% { opacity: 1; }
    25% { opacity: 0.6; }
    50% { opacity: 0.2; }
    100% { opacity: 0; }
  }
}

/* ============================================
   Brand Accent Utility Classes
   ============================================ */
@layer utilities {
  .text-accent-green {
    color: var(--accent-green);
  }
  .text-accent-blue {
    color: var(--accent-blue);
  }
  .text-accent-amber {
    color: var(--accent-amber);
  }
  .text-accent-rose {
    color: var(--accent-rose);
  }
  .text-accent-purple {
    color: var(--accent-purple);
  }

  /* Legacy aliases */
  .text-accent-emerald {
    color: var(--accent-emerald);
  }

  .bg-accent-green {
    background-color: var(--accent-green);
  }
  .bg-accent-blue {
    background-color: var(--accent-blue);
  }
  .bg-accent-amber {
    background-color: var(--accent-amber);
  }
  .bg-accent-rose {
    background-color: var(--accent-rose);
  }
  .bg-accent-purple {
    background-color: var(--accent-purple);
  }

  /* Legacy aliases */
  .bg-accent-emerald {
    background-color: var(--accent-emerald);
  }

  .border-accent-green {
    border-color: var(--accent-green);
  }
  .border-accent-blue {
    border-color: var(--accent-blue);
  }
  .border-accent-amber {
    border-color: var(--accent-amber);
  }
  .border-accent-rose {
    border-color: var(--accent-rose);
  }
  .border-accent-purple {
    border-color: var(--accent-purple);
  }

  /* Legacy aliases */
  .border-accent-emerald {
    border-color: var(--accent-emerald);
  }
}
